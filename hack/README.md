# Hack Scripts

This directory includes several scripts that are helpful for setting up the OpenShift environment for end-to-end (e2e) testing.

## Script Explanation

| **Script Name**      | **Explanation**                                                                                                                                                                                                                                                                                                                                                                                    | **Where is it used?**                                                                                         | **How to use it?**                                    | **Makefile target**                       
|----------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|-------------------------------------------------------|-------------------------------------------|
| create-e2e-user.sh | This script generates a bcrypt hash for a given password and outputs it along with a username in the format username:hashed_password. It includes a function to create the bcrypt hash using OpenSSL and then prints the username and hashed password.                                                                                                                                         | The output is later used as a constant in the e2e-tests setup to create an HTPasswd user in OpenShift.      | bash create-e2e-user.sh                             | -                                         |
| create-env.sh      | This script generates a configuration file for OpenShift authentication and API access based on the provided cluster name and domain. It constructs various URLs needed for authentication and API requests, sets specific configuration variables, and outputs these variables to a specified file. The script takes three arguments: CLUSTER_NAME, CLUSTER_DOMAIN, and the output file name. | The output is a .env file which can be used for locally running the backend.                                 | bash create-env.sh <CLUSTER_NAME> <CLUSTER_DOMAIN> <OUTPUT_FILE> | make env <CLUSTER_NAME> <CLUSTER_DOMAIN>|
| deploy-capp.sh     | This script clones the container-app-operator git repo and uses its Makefile to install Capp on the cluster. It makes sure the container-app-operator pods are running and also creates the DNS ConfigMap which is needed for Capp to run.                                                                                                                                                   | This is used as part of the e2e process to set up an OpenShift cluster with Capp installed and configured. | bash deploy-capp.sh                                | make deploy-capp <CAPP_RELEASE> |
| undeploy-capp.sh   | This script clones the container-app-operator git repo and uses its Makefile to uninstall Capp from the cluster.                                                                                                                                                                                                                                                                                 | This is used as part of the cleanup process of the e2e to remove Capp from the OpenShift cluster.           | bash undeploy-capp.sh                              | make deploy-capp <CAPP_RELEASE> |
